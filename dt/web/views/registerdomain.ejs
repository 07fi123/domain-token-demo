<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>DomainToken</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans|Roboto" rel="stylesheet">
      <link rel="stylesheet" href="style.css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- Leave those next 4 lines if you care about users using IE8 -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
<div class="container">
    <div id="box" class="jumbotron">
      <img class="logo" src="http://www.domaintoken.io/wp-content/uploads/2017/12/Domain-Token-Logofull.png"/>
<br><br>
      <h3>Register Your Domain</h3>
         <div class="input-group">
           <input id="domain" type="text" class="form-control" placeholder="ex. potato.dom">
           <span class="input-group-btn">
             <button id="go" class="btn btn-default" type="button">Go!</button>
           </span>

         </div><!-- /input-group -->
       <div id="res"></div>
    </div>

</div>




    <!-- Including Bootstrap JS (with its jQuery dependency) so that dynamic components work -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  </body>
  <script>
  console.log($);

$('#go').click(function () {
  // alert('this will hit /register?n=POTATO');
  var d = $('#domain').val();
  function isValidDomain(v) {
  if (!v) return false;
  var re = /^(?!:\/\/)([a-zA-Z0-9-]+\.){0,5}[a-zA-Z0-9-][a-zA-Z0-9-]+\.[a-zA-Z]{2,64}?$/gi;
  return re.test(v);
}

if (isValidDomain(d)) {
  $.get( "/register?n=" + d, function( data ) {
  //$( ".result" ).html( data );
  console.log(data);
  $('#res').html('<br/><div id="ret"></div>');
  $('#ret').append('<h5>' + d + '</h5><hr>');
  $('#ret').append('<br/>Hash: <pre>' + data + '</pre>');
  // $('#ret').append('<br/>Account:  <pre>' + data.account + '</pre>');
  // $('#ret').append('<br/>Contract Address: <pre>' + data.contractAddress + '</pre>');
  // $('#ret').append('<br/>Gass Price: <pre>' + data.gassPrice + '</pre>');
  // $('#ret').append('<br/>Gass Limit:  <pre>' + data.gasslimit + '</pre>');
  // $('#ret').append('<br/>Number: <pre>' + data.number + '</pre>');
  $('#box').append('<p></p>');
  $('#box').append('<p></p>');
  $('#ret').append('<p>Check your registrations <a href="https://rinkeby.etherscan.io/address/0x04d45fc663e5bb101607e6fb74b26a920ae579a0">here.</a></p>');
  $('#ret').append('<p>Verify <a href="https://rinkeby.etherscan.io/tx/' +  data  + '">here</a>');
  $('#ret').append('<a href="/setendpoint"><button id="end" class="btn btn-default" type="button">Set Endpoint</button></a>');

  $('#box').append('<p></p>');
});
}
else {
  alert(d + ' is not a valid name.');
}

});

  </script>
</html>
